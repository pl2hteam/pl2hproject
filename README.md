![143427874-c9a2c28d-789d-4af2-ab4e-0aece9a16349-removebg-preview](https://user-images.githubusercontent.com/88923210/143464419-fc7cb9e8-bb30-40b1-ba0d-c5d776866ada.png)

# ğŸ‘¨â€â¤ï¸â€ğŸ’‹â€ğŸ‘¨'Play & Love to Happy in PL2H World!' 
- ì‚¬ë‘í•˜ëŠ” ì—°ì¸ê³¼ì˜ í–‰ë³µì„ PL2H Worldì—ì„œ ë§ˆìŒê» ì¦ê²¨ë³´ì„¸ìš”!
- ì‹¸ì´ì›”ë“œ ê°ì„±ì´ ì—¬ëŸ¬ë¶„ì˜ ì¶”ì–µì„ ë”ìš± ì•„ë¦„ë‹µê²Œ í•´ ì¤„ ê²ƒì…ë‹ˆë‹¤.
- ì—°ì¸ì„ ìœ„í•œ ì„ ë¬¼ì„ êµ¬ë§¤í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ì €í¬ê°€ ì˜¤í”ˆí•œ ìƒì ìœ¼ë¡œ êµ¬ê²½ì˜¤ì„¸ìš”!
- ì•—! ì†”ë¡œì‹œë¼êµ¬ìš”? ê´œì°®ìŠµë‹ˆë‹¤~ ì €í¬ ìƒì ì€ ëˆ„êµ¬ì—ê²Œë‚˜ ì—´ë ¤ìˆë‹µë‹ˆë‹¤~


##
## 3ì°¨ í”„ë¡œì íŠ¸ :2021-11-05 ~ 2021-11-22

## ğŸ‘œğŸ‘¢ğŸ§¢[**ì„œë¹„ìŠ¤ë¡œ ì´ë™**](http://13.124.13.37:3000/)



p.s. í˜„ì¬ ì„œë²„ë¥¼ ë‹«ì€ ê´€ê³„ë¡œ ì‹¤í–‰ì´ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤

![KakaoTalk_Image_2021-11-24-16-41-43](https://user-images.githubusercontent.com/88940298/143195627-412b8a3c-a61c-4842-b135-564b50293f44.gif)


---   

ğŸ‘¨â€ğŸ‘©â€ğŸ‘¦â€ğŸ‘¦Member.  Pl2hì˜ íŒ€ì›ë“¤ì…ë‹ˆë‹¤

![í™”ë©´ ìº¡ì²˜ 2021-11-25 194708](https://user-images.githubusercontent.com/88940298/143427874-c9a2c28d-789d-4af2-ab4e-0aece9a16349.png)

í•œê²½í˜„(kyunghyun Han):[ê¹ƒí—ˆë¸Œ](https://github.com/kyunghyunHan)SNS Frontend     
ì´ë¯¼ì£¼(Minjoo Lee):[ê¹ƒí—ˆë¸Œ](https://github.com/codecocos)SNS Backend      
ì´ìƒë¯¼(ssangMin Lee):[ê¹ƒí—ˆë¸Œ](https://github.com/LeessangMin)Shop Frontend   
ë°•ì¤€í˜(jun hyuk Park):[ê¹ƒí—ˆë¸Œ](https://github.com/berrypjh)Shop Backend  

**ê¸°ê°„** :  2021-11-05 ~ 2021-11-22

**ì „ë°˜ì ì¸ í”„ë¡œì íŠ¸ ì§„í–‰ì ˆì°¨**
1. í”„ë¡œì íŠ¸ íŒŒíŠ¸ë³„ë¡œ ì§„í–‰(ì»¤í”Œìƒì  ë¶€ë¶„ê³¼ SNSë¶€ë¶„)
2. ì˜¤í”„ë¼ì¸ ìœ„ì£¼ì˜ íŒ€ ì‘ì—…
3. ì˜¤í”„ë¼ì¸ì´ ë¶ˆê°€ëŠ¥í•  ê²½ìš° ì˜¨ë¼ì¸ìœ¼ë¡œ íŒ€ ì‘ì—…ì„ ì§„í–‰í•˜ë©° ì„œë¡œì˜ ì½”ë“œ ìƒí™© ë¸Œë¦¬í•‘ ë° íšŒì˜
4. ê° íŒŒíŠ¸ë³„ ì§„í–‰ ìƒí™©ì„ ìˆ˜ì‹œë¡œ ê³µìœ  - ê°œë°œ ì¤‘ ì˜ˆìƒì¹˜ ëª»í•œ ì´ìŠˆê°€ ìˆëŠ”ì§€, ë‹¤ë¥¸ íŒŒíŠ¸ì˜ ì§€ì›ì´ í•„ìš”í•œ ë¶€ë¶„ì€ ì—†ëŠ”ì§€

---------------------------------------------------------------------------------------------------------------------------------------

**1ì£¼ì°¨** 
>-1ì¼ì°¨ : ì„œë¡œì˜ í”„ë¡œì íŠ¸ ì•„ì´ë””ì–´ ê³µìœ  ë° ì •ë¦¬
>
>-2ì¼ì°¨ : ì•„ì´ë””ì–´ ì„¸ë¶€ì‚¬í•­ ë° dbê´€ê³„ì¿¼ë¦¬ ì •ë¦¬
>
>-3ì¼ì°¨ ë¶€í„° í”„ë¡œì íŠ¸ ì§„í–‰

**2ì£¼ì°¨** 
-í”„ë¡œì íŠ¸ íŒŒíŠ¸ë³„ ì§„í–‰, ì¤‘ê°„ ì—ëŸ¬í™•ì¸, íŒŒíŠ¸ë³„ ì§„í–‰ë¥ ì„ í™•ì¸í•˜ë©´ì„œ ì•ìœ¼ë¡œì˜ ì§„í–‰ì¼ì • ì¡°ìœ¨.

**3ì£¼ì°¨**
-í”„ë¡œì íŠ¸ íŒŒíŠ¸ë³„ ë§ˆë¬´ë¦¬ ë° ë°°í¬ì§„í–‰

**ë°°í¬ í›„**
>
3ì£¼ê°„ ì§„í–‰í•˜ì˜€ë˜ í”„ë¡œì íŠ¸ì˜ ê²°ê³¼ë¬¼ì— ëŒ€í•´ ì¢‹ì•˜ë˜ ì ê³¼  ê°œì„ í•´ì•¼ í•  ì ì„ ìƒê°í•˜ê³  ê³µìœ í•©ë‹ˆë‹¤. 
ê°ì ë§¡ì€ ë¶€ë¶„ì— ëŒ€í•´ ì„¤ëª…í•˜ë©°, ê·¸ ì™¸ì—ë„ ì„œë¹„ìŠ¤ì˜ ê°€ì¹˜ë‚˜ ë°©í–¥ì„±ì— ëŒ€í•œ ì˜ê²¬ì„ ì£¼ê³  ë°›ìœ¼ë©° ì„œë¡œì˜ ìƒê°ì„ ë‚˜ëˆ„ì—ˆìŠµë‹ˆë‹¤.
ì§€ë‚œ í”„ë¡œì íŠ¸ì˜ ì§„í–‰ê³¼ì •ì„ ê¸°ë¡ìœ¼ë¡œ ë‚¨ê¸°ë©° ì •ë¦¬í•©ë‹ˆë‹¤.


![KakaoTalk_20211125_195813474](https://user-images.githubusercontent.com/88940298/143429808-f5a10b4d-f7c0-4945-953a-e2b069671d21.png)




# ëª©ì°¨
[1.ê°œìš”](#ê°œìš”)

[2.ëª©ì ](#ëª©ì )

- ê¸°ì¡´ ì„œë¹„ìŠ¤ì™€ì˜ ì°¨ë³„ì 

[3.ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ](#ì „ì²´-ì†ŒìŠ¤-ì½”ë“œ-click)

[4.ì‚¬ìš©í•œ ê¸°ìˆ ](#ì‚¬ìš©í•œ-ê¸°ìˆ )

[5.ì£¼ìš” ê¸°ëŠ¥](#ì£¼ìš”-ê¸°ëŠ¥)

[6.ë°œìƒí•œ ì´ìŠˆ & í•´ê²° ë°©ë²•](#ë°œìƒí•œ-ì´ìŠˆ--í•´ê²°-ë°©ë²•)

[7.ìƒì„¸ ì„¤ëª…](#ìƒì„¸-ì„¤ëª…)

 - DB êµ¬ì¡° (ERD)

 - ì „ì²´ íë¦„ë„
 
 - í”„ë¡œì íŠ¸ ì„¤ëª… PPT

***

### ê°œìš”

ìµœê·¼ ì‹¸ì´ì›”ë“œ ì¶œì‹œì†Œì‹ê´€ë ¨ í•˜ì—¬, ì‹¸ì´ì›”ë“œ ê°ì„±ê³¼ ë„¤ì´ë²„ ì»¤í”Œí˜ì´ì§€ë¥¼ ì ‘ëª©ì‹œí‚¤ê³ , ë”ë¶ˆì–´ SNSë¥¼ ì´ìš©í•˜ëŠ” ì»¤í”Œë“¤ì„ ëŒ€ìƒìœ¼ë¡œ ì•„ì´í…œë“¤ì„ íŒë§¤í•˜ëŠ” ìƒì ë¥¼ í†µí•œ ë³µí•©ì„œë¹„ìŠ¤ë¥¼ êµ¬ìƒí•´ë³´ì•˜ìŠµë‹ˆë‹¤.

ì»¤í”Œìƒì ê³¼ SNSì—ì„œ ì‚¬ìš©í•˜ëŠ” DBë¥¼ MongoDBì™€ MySqlë¡œ ë¶„ë¥˜í•˜ì—¬ ë”ìš±ë” ë§ì€ ê³µë¶€ê°€ ë  ìˆ˜ ìˆê²Œ í•˜ì˜€ê³ ,
  
  ê´€ë ¨ìë£Œ  

ë„¤ì´ë²„ ì»¤í”Œí˜ì´ì§€ [ê´€ë ¨ìë£Œ](https://blog.naver.com/PostList.naver?blogId=sum-lab&categoryNo=51&parentCategoryNo=51&skinType=&skinId=&from=menu&userSelectMenu=true)  
ì‹¸ì´ì›”ë“œ [ê´€ë ¨ìë£Œ](https://newsis.com/view/?id=NISX20211123_0001661075&cID=13001&pID=13000)

ìœ„ì˜ ìë£Œë“¤ì„ ë°”íƒ•ìœ¼ë¡œ ê°ì„±ê³¼ ê¸°ëŠ¥ì´ í•¨ê»˜í•˜ëŠ” ì„œë¹„ìŠ¤ë¥¼ ì œê³µí•˜ê³ ì ë…¸ë ¥í–ˆìŠµë‹ˆë‹¤.

### ëª©ì 

> ì»¤í”Œ ì „ìš© SNS ë° SHOP í™œì„±í™”
> 1. ì»¤í”Œ ê¸°ëŠ¥ êµ¬í˜„í™œìš© SNS í™œì„±í™”
> 2. RDS(Mysql),Atlas(MongoDB) ë™ì‹œ í™œìš© í”„ë¡œì íŠ¸ í™œìš©
> 3. ê²°ì œì„œë¹„ìŠ¤ êµ¬í˜„ ìˆ™ë‹¬
> 4. sns í˜ì´ì§€ êµ¬ì„±
> 5. ë°°í¬ ì„œë¹„ìŠ¤ êµ¬í˜„ ê³µë¶€ (ec2,s3,nginx)

- **ê¸°ì¡´ ì„œë¹„ìŠ¤ì™€ì˜ ì°¨ë³„ì **

   - nosql mysql ì˜ ê°ê°ì˜ ì¥ì ì„ ë¶€ê°ì‹œí‚¤ê³  ë‹¨ì ì„ ë³´ì•ˆ
   - REDUX í™œìš© AUTH ì§„í–‰
   - ì»¤í”Œ ì—°ê²° ì„œë¹„ìŠ¤ ì§„í–‰ (ê´€ê³„ì¿¼ë¦¬)
   

### ğŸ‘¬ ì „ì²´ ì†ŒìŠ¤ ì½”ë“œ [í´ë¼ì´ì–¸íŠ¸](https://github.com/pl2hteam/pl2hproject/tree/main/client)  or [ì„œë²„](https://github.com/pl2hteam/pl2hproject/tree/main/server)


### ğŸ›  ì‚¬ìš©í•œ ê¸°ìˆ 

![KakaoTalk_20211125_174239334](https://user-images.githubusercontent.com/88940298/143418476-feff562d-e665-4d09-a100-0e0dccb38f3b.png)



- ì›¹ í™”ë©´ êµ¬ì„± : `REACT` 
- DB ì•¡ì…˜ ì²˜ë¦¬ : `Sequelize` `mongoose`
- DBMS : `MySQL` `Mongo` 
- ê°œë°œ Tool :`PostMan` `Visual Studio Code``github`
- AWS ë°°í¬ : `EC2` `RDS` `Atlas`
- ë¡œê·¸ì¸ êµ¬í˜„ :  `REDUX`
- í”„ë ˆì„ì›Œí¬ : `NodeJs` `REACT`
- ê²°ì œ: `PAY PAL`
- í”„ë¡œì íŠ¸ ê´€ë¦¬ Tool : `Google Drive` `GitHub` `notion`
- ì‚¬ìš© ëª¨ë“ˆ(Client) : `
- "@material-ui/core": "^4.12.3",  
    "@material-ui/icons": "^4.11.2",  
    "@material-ui/lab": "^4.0.0-alpha.60",  
    "@mui/icons-material": "^5.1.0",  
    "@mui/styles": "^5.1.0",  
    "antd": "^3.26.20",  
    "axios": "^0.19.2",  
    "axios-mock-adapter": "^1.20.0",  
    "bootstrap": "^5.1.3",  
    "components": "^0.1.0",  
    "core-js": "^3.6.4",    
    "d3": "^7.1.1",   
    "formik": "^1.5.8",    
    "html-react-parser": "^1.4.0",    
    "postcss-loader": "^6.2.0",    
    "react": "^16.8.6",    
    "react-app-polyfill": "^1.0.6",  
    "react-carousel-minimal": "^1.4.1",  
    "react-copy-to-clipboard": "^5.0.4",  
    "react-dom": "^16.8.6", 
    "react-dropzone": "^11.4.2",  
    "react-elastic-carousel": "^0.11.5",  
    "react-flip-move": "^3.0.4",  
    "react-hook-form": "^7.19.0",  
    "react-icons": "^3.7.0",  
    "react-image-gallery": "^1.2.7",  
    "react-image-shadow": "^1.1.3",  
    "react-infinite-scroll-component": "^6.1.0", 
    "react-instagram-zoom-slider": "^1.4.0",  
    "react-material-ui-carousel": "^3.0.4",  
    "react-moment": "^1.1.1",  
    "react-paypal-express-checkout": "^1.0.5",  
    "react-redux": "^7.1.0-rc.1",  
    "react-responsive-carousel": "^3.2.22",  
    "react-router-dom": "^5.0.1",  
    "react-scripts": "3.4.1",  
    "react-show-more-text": "^1.5.0",  
    "react-slick": "^0.28.1",  
    "react-spring": "^9.3.0",  
    "react-swift-slider": "^7.0.1",  
    "react-use-gesture": "^9.1.3",  
    "redux": "^4.0.0",  
    "redux-promise": "^0.6.0", 
    "redux-thunk": "^2.3.0",  
    "styled-reset": "^4.3.4",  
    "webpack": "^4.42.0",  
    "yarn": "^1.22.17",  
    "yup": "^0.27.0"  

-  ì‚¬ìš© ëª¨ë“ˆ(Server) :`  
  - "async": "^3.2.2",      
    "bcrypt": "^5.0.1",      
    "body-parser": "^1.18.3",      
    "cookie-parser": "^1.4.5",      
    "cors": "^2.8.5",      
    "debug": "^4.1.1",      
    "dotenv": "^10.0.0",      
    "express": "^4.17.1",      
    "express-session": "^1.17.2",      
    "fluent-ffmpeg": "^2.1.2",      
    "jsonwebtoken": "^8.5.1",      
    "mongoose": "^5.4.20",      
    "morgan": "^1.10.0",      
    "multer": "^1.4.3",      
    "mysql2": "^2.3.3",      
    "passport": "^0.5.0",      
    "passport-local": "^1.0.0",      
    "promise": "^8.1.0",      
    "sequelize": "^6.9.0",      
    "sequelize-cli": "^6.3.0"  
    ` 

### ğŸŒ±ì£¼ìš” ê¸°ëŠ¥

- ë¡œê·¸ì¸ : ì¼ë°˜ ë¡œê·¸ì¸, `Sequelize` `passport` `mysql` `REDUX` 
- íšŒì›ê°€ì… : `Sequelize` `passport` `mysql` `mongo` `mongoose` `REDUX`
- íšŒì›ì •ë³´ë³€ê²½ :`Sequelize` `mysql` `mongo` `mongoose`
- ì¥ë°”êµ¬ë‹ˆ : `Sequelize` `mysql` `mongo` `mongoose`
- ê²°ì œ : `Sequelize` `passport` `PAYTAL` `mongo` `mongoose`
- ë§ˆì´í˜ì´ì§€ : `Sequelize` `mysql` `RDS`
- SNS:`Sequelize` `mysql` `RDS`
- ë†€ê±°ë¦¬ :`Sequelize` `mysql` `RDS`
- í¸ì§€:`Sequelize` `mysql` `RDS`
- ë†€ê±°ë¦¬ :`Sequelize` `mysql` `RDS`
- MUSIC PLAYER :`styled-componets`
- ê´€ë¦¬ìëª¨ë“œ(ìƒí’ˆë“±ë¡ ë° ì‚­ì œ) :`mongo` `mongoose`
- ë¬¼í’ˆ í•„í„° (ê²€ìƒ‰): `mongo` `mongoose` 
- ëª¨ë‹¬:`Sequelize` `mysql` `RDS`



### ğŸ”  ê¹ƒ ë¸ŒëŸ°ì¹˜ í™œìš©

ì½”ë“œ ë³‘í•©ì‹œ ì˜¤ë¥˜ë¥¼ ìµœì†Œí™” í•˜ê¸°ìœ„í•´ ê¹ƒë¸ŒëŸ°ì¹˜ 

```
âœ” main - ê°œë°œ ì™„ë£Œí•˜ê³  ìµœì¢… ì½”ë“œ ì˜¬ë¦¬ëŠ” ë¸Œëœì¹˜


âœ” SNS  sns íŒŒíŠ¸ ê¹ƒë¸ŒëŸ°ì¹˜


   - diaryhyun (sns íŒŒíŠ¸ í”„ë¡ íŠ¸ ë¸ŒëŸ°ì¹˜)
   
   - diarymin (sns íŒŒíŠ¸ ê¹ƒ ë¸ŒëŸ°ì¹˜)
   
âœ” SHOP  shop íŒŒíŠ¸ ê¹ƒë¸ŒëŸ°ì¹˜


   - ssangmin (shop íŒŒíŠ¸ í”„ë¡ íŠ¸ ë¸ŒëŸ°ì¹˜)
   
   - parkjh (shop íŒŒíŠ¸ ê¹ƒ ë¸ŒëŸ°ì¹˜)

  

```

# ğŸ”¥ë°œìƒí•œ ì´ìŠˆ & í•´ê²° ë°©ë²•

### "CORS ì •ì±…ì— ì˜í•œ ì—ëŸ¬"

[ìƒí™©]  
![ì½œìŠ¤ ì—ëŸ¬](https://user-images.githubusercontent.com/90792916/143545407-1d5a53ca-7a6b-442d-94d9-72ea41138cdf.png)  

[ë¬¸ì œ] 

ì„œë²„ëŠ” í¬íŠ¸ê°€ 5000 ë²ˆì´ê³ ,

í´ë¼ì´ì–¸íŠ¸ëŠ” í¬íŠ¸ê°€ 3000 ë²ˆìœ¼ë¡œ ë‹¤ë¥¸ë° ì„œë¡œ ì£¼ê³  ë°›ìœ¼ë ¤ê³  í•˜ë©´,

CORS ì •ì±…ì— ì˜í•´ ë§‰í˜€ë²„ë¦°ë‹¤.

[í•´ê²°] 

npm i http-proxy-middleware ëª¨ë“ˆì„ ì„¤ì¹˜í•˜ê³ 
```
const { createProxyMiddleware } = require('http-proxy-middleware');

module.exports = function(app) {
  app.use(
    '/api',
    createProxyMiddleware({
      target: 'http://localhost:5000',  //  ë…¸ë“œ ì„œë²„ê°€ 5000 ë²ˆì´ë¯€ë¡œ target ë„ ê°™ê²Œí•œë‹¤.
      changeOrigin: true,
    })
  );
};
```
í”„ë¡ì‹œ ì„œë²„ë¥¼ ì´ìš©í•˜ì—¬ ì—ëŸ¬ë¥¼ í•´ê²°í–ˆë‹¤.

### "Authë¡œ 2ê°€ì§€ DB(MongoDBì™€ MySqlDB) ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ê³ ë¯¼"

[ìƒí™©] 2 ê°€ì§€(MongoDBì™€ MySqlDB) DBë¥¼ ë™ì‹œì— ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì—,  2 ê°€ì§€ DBë¥¼ ì¶©ëŒì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ë°©ì•ˆ

[ë¬¸ì œ] 

SNS(MySqlDB)ë¡œ ë¡œê·¸ì¸ í•˜ì—¬ë„ ì»¤í”Œìƒì (MongoDB)ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì—¬ì•¼ í•¨.
ì¼ë¶€ ê³µí†µëœ DBê°€ í•„ìš”í•œ ìƒí™©ì´ ë°œìƒí•˜ì—¬, 2 ê°€ì§€ DBì˜ ì¶©ëŒì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ê³ ë¯¼.

[í•´ê²°] 

Auth.jsì—ì„œ ifë¬¸ì„ ì‚¬ìš©í•˜ì—¬ MySqlì™€ Monggo ì´ìš©ì— ì¡°ê±´ì„ ë¶€ì—¬í•¨.

![KakaoTalk_20211125_153528603](https://user-images.githubusercontent.com/88923210/143395201-9da11fc9-96a8-4dcc-a0ba-da667f3eaf1d.png)



### "envíŒŒì¼ì˜ ì¤‘ìš”ì„± "


[ìƒí™©] gitignoreì— ì˜¬ë¼ê°€ ìˆëŠ” envíŒŒì¼ì´ ì—†ì–´ DBì ‘ì† ë¶ˆê°€

[ë¬¸ì œ] 

GitHubì‚¬ìš©í•  ë•Œ Git branch ì „í™˜ ì‹œì— 
gitignoreì— ì˜¬ë¼ê°€ ìˆëŠ” envíŒŒì¼ì´ ì—†ì–´ DBì ‘ì† ë¶ˆê°€

![KakaoTalk_20211125_153121946](https://user-images.githubusercontent.com/88923210/143392535-7d0b32c1-0d26-448c-8a4d-250c18c8e8b8.png)

[í•´ê²°] 

envíŒŒì¼ì˜ ì¡´ì¬ë¥¼ ì¸ì§€í•˜ê³  envíŒŒì¼ì„ ì¶”ê°€í•˜ì—¬ DBì ‘ì† ì„±ê³µ.  
  
    
      
      

### "Redux ê´€ë ¨ auth ì¶©ëŒë¬¸ì œ "


[ìƒí™©] MusicPlayer ë° authì—ëŸ¬ë°œìƒ 

[ë¬¸ì œ] 

auth ì™€ musicplyerê°„ ì¶©ëŒë¡œ ì¸í•œ ìŒì•… ì¬ìƒ ë° ë¡œê·¸ì¸ ì—ëŸ¬ë°œìƒ



[í•´ê²°] 

ìŒì•…ì¬ìƒì„ ìœ íŠœë¸Œ urlë¡œ ë³€ê²½í•˜ì—¬ ì¶©ëŒë°©ì§€
  
    
      






### "property "


[ìƒí™©] gitignoreì— ì˜¬ë¼ê°€ ìˆëŠ” envíŒŒì¼ì´ ì—†ì–´ DBì ‘ì† ë¶ˆê°€

[ë¬¸ì œ]   
<img width="693" alt="KakaoTalk_20211125_124522181" src="https://user-images.githubusercontent.com/88940298/143390995-430a4520-9e35-4f19-9698-ffc1ec7dce0c.png">  


[í•´ê²°] 

```
{Products.length === 0 ? (
            <div className="no_item">
              <h2>ë“±ë¡ëœ ì•„ì´í…œì´ ì—†ìë‹ˆë‹¤</h2>
            </div>
          ) : (
            <div className="shop-main-content-item_list">{renderCards}</div>
          )}
```
ìƒí’ˆì´ ì—†ì„ ê²½ìš°ë¥¼ ì¶”ê°€í–ˆë‹¤





### "React ë Œë”ë§ì¤‘ ì—ëŸ¬ë°œìƒ "

[ìƒí™©] React ë Œë”ë§ì¤‘ ì—ëŸ¬ë°œìƒ 

[ë¬¸ì œ] 

![KakaoTalk_20211125_124542194](https://user-images.githubusercontent.com/88940298/143390699-22493ae8-1850-44a4-88ed-9ecf51093222.png)

[í•´ê²°] 
```
  const userInfo = useSelector(state => state.user);
  const [User, setUser] = useState({});
  
  useEffect(() => {
    if (userInfo) {
      if (userInfo.userData) {
        setUser(userInfo.userData);
        if (userInfo.userData.couple_code) {
          setCoupleCode(userInfo.userData.couple_code);
        }
      }
    }
  }, [userInfo.userData]);
```

useEffect ë¥¼ ì‚¬ìš©í•˜ì—¬ ìœ ì €ì •ë³´ë¥¼ stateë‹´ì•„ ë¬¸ì œë¥¼ 




### "React ë°°í¬ì—ì„œì˜ ë¬¸ì œì  íŒŒì•… ,dbë° êµ¬ì¡°ì„¤ê³„ "

[ìƒí™©] ë°°í¬ë„ì¤‘ ì—ëŸ¬ë°œìƒ 

[ë¬¸ì œ] 
```
Error: error:0308010C:digital envelope routines::unsupported
    at new Hash (node:internal/crypto/hash:67:19)
    at Object.createHash (node:crypto:130:10)
    at module.exports (/Users/user/Programming Documents/WebServer/untitled/node_modules/webpack/lib/util/createHash.js:135:53)
    at NormalModule._initBuildHash (/Users/user/Programming Documents/WebServer/untitled/node_modules/webpack/lib/NormalModule.js:417:16)
    at handleParseError (/Users/user/Programming Documents/WebServer/untitled/node_modules/webpack/lib/NormalModule.js:471:10)
    at /Users/user/Programming Documents/WebServer/untitled/node_modules/webpack/lib/NormalModule.js:503:5
    at /Users/user/Programming Documents/WebServer/untitled/node_modules/webpack/lib/NormalModule.js:358:12
    at /Users/user/Programming Documents/WebServer/untitled/node_modules/loader-runner/lib/LoaderRunner.js:373:3
    at iterateNormalLoaders (/Users/user/Programming Documents/WebServer/untitled/node_modules/loader-runner/lib/LoaderRunner.js:214:10)
    at iterateNormalLoaders (/Users/user/Programming Documents/WebServer/untitled/node_modules/loader-runner/lib/LoaderRunner.js:221:10)
/Users/user/Programming Documents/WebServer/untitled/node_modules/react-scripts/scripts/start.js:19
  throw err;
  ^
```

react ë°°í¬ ì¤‘ ì—ëŸ¬ë°œìƒ. ì´ëŠ” nodejs ë²„ì „ì´ ë†’ì•„ì„œ ìƒê¸°ëŠ” ë¬¸ì œë‹¤.

[í•´ê²°] export ì˜µì…˜ 
```
export NODE_OPTIONS=--openssl-legacy-provider 
```
ì‚¬ìš©í•˜ì—¬ ë¬¸ì œí•´ê²°

ë˜ëŠ” pakage json ì—ì„œ 

```
// ë³€ê²½ ì „
"start": "react-scripts start"

// ë³€ê²½ í›„
"start": "react-scripts --openssl-legacy-provider start"
```




### React Client buildì¤‘ ì—ëŸ¬ë°œìƒ

[ìƒí™©] ë¹Œë“œë„ì¤‘ ì—ëŸ¬ ë°œìƒ

[ë¬¸ì œ] 
```
FATAL ERROR: CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory
```

ë¹Œë“œì‹œ ìë°”ìŠ¤í¬ë¦½íŠ¸  ì—ëŸ¬ë°œìƒ 

[í•´ê²°] export ì˜µì…˜ 
-ë…¸ë“œì˜ ê¸°ë³¸ ë©”ëª¨ë¦¬ ì‚¬ì´ì¦ˆëŠ” 512MBë‹¤.  
ê³¼ë„í•œ ë©”ëª¨ë¦¬ ì ìœ ë¡œ ì¸í•˜ì—¬ js ì—”ì§„ì´ í­ë°œí•´ë²„ë¦° ê²ƒì´ë‹¤.  
Javaì™€ ë§ˆì°¬ê°€ì§€ë¡œ VMì—ì„œ Heapë©”ëª¨ë¦¬ ìµœëŒ€í•œë„ê°€ ì •í•´ì ¸ìˆê¸° ë•Œë¬¸ì´ë©°. ë¬¼ë¡  ê°€ì¥ ì¢‹ì€ê²ƒì€ ë©”ëª¨ë¦¬ë¥¼ ì ê²Œ ì“°ë„ë¡ ë¡œì§ì„ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ì§€ë§Œ,  
ê·¸ê²ƒì´ ì–´ë ¤ìš¸ ê²½ìš° â€˜â€”max-old-space-sizeâ€™ ì˜µì…˜ì„ ì£¼ë©´ í™ë©”ëª¨ë¦¬ ì˜ì—­ í•œë„ë¥¼ í‚¤ìš¸ìˆ˜ê°€ ìˆë‹¤  

ë¡œì»¬ì—ì„œ ë¹Œë“œ í›„ git pullí›„ ì‹¤í–‰






## NodeJs ì™€ REACT ë¹Œë“œ ë° ë°°í¬ì‹œ  ê¹¨ë‹¬ì€ ì  

ë¹Œë“œì‹œ ë©”ëª¨ë¦¬ ê´€ë ¨ ì—ëŸ¬ ë°œìƒ ë° ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬ê°€ ë°œìƒí–‡ì—ˆë‹¤.  
ë°°í¬ì‹œ ë°°í¬ ê´€ë ¨ ìˆ™ë‹¬ì´ ë¶€ì¡±í•˜ì˜€ê³ , ë¹Œë“œí•˜ëŠ”ë°ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì• ë¥¼ ë¨¹ì—‡ë‹¤ .  
ì¢€ ë” ìˆ™ë‹¬í•˜ì—¬ ì´ëŸ¬í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì§€ ì•Šë„ë¡ í•˜ë©° , ë˜í•œ ë² í¬ì‹œ node js ë²„ì „ ë¬¸ì œë¡œ ì¸í•˜ì—¬ ì—ëŸ¬ê°€ ë°œìƒí–‡ì—‡ë‹¤  
NGINX ì„œë²„ë¡œ í•˜ëŠ” ë²•ì„ ìˆ™ë‹¬í•˜ì—¬ ì‹œë„ë¥¼ í•´ë³´ë©´ ì¢‹ì„ ê²ƒ ê°™ë‹¤  







# ğŸ’¯ë°°í¬ í™œìš©(EC2, RDS,MONGGO) 


 
<img width="1440" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2021-11-24 á„‹á…©á„’á…® 3 06 14" src="https://user-images.githubusercontent.com/88940298/143198522-a0167210-516b-46b9-9b6d-d50e5d5c60d2.png">


    



- ë°ì´í„°ë² ì´ìŠ¤ AWS EC2ë°©ì‹ ì²´íƒ ì¸ìŠ¤í„´ìŠ¤ ìƒì„±í›„ í‚¤ê°’ìƒì„± í›„
ì„œë²„ ì—°ê²°

- sudo su ì…ë ¥í•˜ì—¬ ê´€ë¦¬ëª¨ë“œë¡œ ë³€ê²½

- sudo apt update í•˜ì—¬ ì—…ë°ì´íŠ¸

- sudo apt install git í•˜ì—¬ ê¹ƒ ë‹¤ìš´ë¡œë“œ

- curl -o-https://raw.githubusercontent.com/nvm-sh/nvm/v0.34.0/install.sh | bash í•˜ì—¬ nvmì„¤ì¹˜

- .~/.nvm/nvm.sh í•˜ì—¬ NVMí™œì„±í™”

- nvm install node nvmì„ ì´ìš©í•˜ì—¬ Node.jsë¥¼ ì„¤ì¹˜ 

- git clone ë° git pull í•˜ì—¬ ê¹ƒì˜ ì „ì²´ ì½”ë“œ ë° ìƒˆë¡œìš´ ë²„ì „ ìµœì‹ í™”

- server í´ë”ì—ì„œ   concurrently ë¥¼ ì‚¬ìš©í•œ  npm run dev ì‹¤í–‰í•˜ì—¬ server client ë™ì‹œì‹¤í–‰

- AWSì˜ RDS ë° Altars ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ê³µìœ í•˜ì—¬ í˜‘ì—…í•˜ì—¬ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ì˜€ê³ , AWSì˜ EC2ë¥¼ í™œìš©í•˜ì—¬ ë°°í¬ë¥¼ ì§„í–‰ server client ë™ì‹œ ì‹¤í–‰ 

- $ sudo apt-get install screen í›„ screen ì‹¤í–‰ í›„ npm run dev ì‹¤í–‰

- ìŠ¤í¬ë¦° ì¢…ë£Œ -

- screen -ls ì„œë²„ í™•ì¸

- kill [screen ë²ˆí˜¸] ìŠ¤í¬ë¦° ì¢…ë£Œ







# âœ¨ìƒì„¸ ì„¤ëª…
ì „ì²´ ì½”ë“œ : [ì½”ë“œ](https://github.com/pl2hteam/pl2hproject)
    
    - í´ë” ì„¤ëª… (client ì™€ server í´ë” ë‚˜ëˆ„ì–´ì„œ í´ë” ì§„í–‰)
        server : ì„œë²„ í´ë” ì„¤ì •
      - config : config íŒŒì¼ : rdsì—°ê²° ì£¼ì†Œ
      - mongo : mongo db ë¼ìš°í„° ë° ëª¨ë¸
          -configmongo : ëª½ê³  ì—°ê²° ì£¼ì†Œ
          - middleware : ëª½ê³  auth
          - routes : ëª½ê³  ë¼ìš°í„° 
          - schmas : ëª½ê³  ìŠ¤í‚¤ë§ˆ 
      - mysql : mysql db ë¼ìš°í„° ë° ëª¨ë¸
          - middleware : mysql auth
          - models : myslq model
          - passport : mysql ë¡œê·¸ì¸ ê´€ë ¨
          - routes : mysql ë¼ìš°í„°
    client (view): í´ë¼ì´ì–¸íŠ¸ í´ë” ì„¤ì • 
             - public : css ì´ë¯¸ì§€ ë“±
               - resources 
                 - img 
                 - result-image 
             - src : ì†ŒìŠ¤ëª¨ìŒ
               - Common 
                  - Setting 
                  - _actions : auth redux ê´€ë ¨
                  - _reducers  :react reducer
                  - components : ì»´í¬ë„ŒíŠ¸ 
                  - hoc : react -hook 
                  - img : ì´ë¯¸ì§€ ëª¨ìŒ
                     - log  : ìœ ì € ëŒ“ê¸€ ê´€ë ¨ img
                     - minime : minime ê´€ë ¨ ìºë¦­í„°
                     - room : ë°©ì„¤ì • ì´ë¯¸ì§€ 
                  - miniroom : home.js ì— ë¯¸ë‹ˆë£¸ ê´€ë ¨ js
               - SNS 
                  - Jam : ë†€ê±°ë¦¬ ê´€ë ¨ 
                  - Latter: í¸ì§€ê¸°ëŠ¥ ê´€ë ¨ í´ë”
                  - Layout : ì „ì²´ ë ˆì´ì•„ì›ƒ ê´€ë£
                  - Login : ë¡œê·¸ì¸ ê´€ë ¨
                  - Main : SNS ë¡œê·¸ì¸ ê´€ë ¨
                  - Menu : ë©”ì¸ ë©”ë‰´ê´€ë ¨
                  - MyPage : ìƒíƒœë³€ê²½ ê´€ë ¨ í˜ì´ì§€
                  - Pic : ì‚¬ì§„ì²©
                  - Profile : SNS ê´€ë ¨í´ë”
                  - RegisterPage : íšŒì›ê°€ì… ê´€ë ¨ í´ë”
                  - rightSideBox: ìš°ì¸¡ ì‚¬ì´ë“œ ë®¤ì§í”Œë ˆì´ì–´ ê´€ë ¨
                  
               - SHOP 
                  - CartPage : ì¥ë°”êµ¬ë‹ˆ ê´€ë ¨
                  - DatilProductPage  : ë¬¼í’ˆ ë””í…Œì¼í˜ì´ì§€ ê´€ë ¨
                  - HistoryPage  : 
                  - LoginMainPage : ë¡œê·¸ì¸í˜ì´ì§€ ê´€ë ¨
                  - MainForm : SHOPì „ì²´ ë ˆì´ì•„ì›ƒ ë° ë®¤ì§í”Œë ˆì´ì–´ ê´€ë ¨
                  - ShopMain : Shop ë©”ì¸ê´€ë ¨
                  - UploadProductPage : ì´ë¯¸ì§€ ë° ë™ì—¬ìƒ ì—…ë¡œë“œ ê´€ë ¨
                  - images : ì´ë¯¸ì§€ ëª¨ìŒ
    
   
ì„œë²„(app.js) : [ì½”ë“œ](https://github.com/pl2hteam/pl2hproject/blob/431cba07b5add6380c3c976e3593882c22ae3805/server/app.js)
-> ê° í˜ì´ì§€ë³„ ë¼ìš°í„° ì„¤ì •   
passport 5000ë²ˆì‚¬ìš©  

### ğŸ“–í˜ì´ì§€ë³„  ì„¤ëª… (React)   


## Login & Logout 

mongo db mysql db ë¶„ë¥˜í•˜ì—¬ ë”°ë¡œ ë¡œê·¸ì¸ ê°€ëŠ¥ -> auth ì‚¬ìš©í•˜ì—¬ ë¡œê·¸ì¸ ë° íšŒì›ê°€ì…í›„ ìœ ì§€ê¸°ëŠ¥ 
mongo db: shop
mysql db: sns



![KakaoTalk_Image_2021-11-24-17-16-49](https://user-images.githubusercontent.com/88940298/143200371-a2a213f6-67fc-4362-a8a9-adfcb674806e.gif)

```js

export default function (ComposedClass, reload, homePage, adminRoute = null) {
  function AuthenticationCheck(props) {
    const user = useSelector(state => state.user);
    const dispatch = useDispatch();

    useEffect(() => {
      if (homePage) { // SNS PAGE
        dispatch(auth(true)).then((response) => {
          if (!response.payload.isAuth) {
            if (reload) {
              props.history.push("/sns");
            }
          } else {
            if (adminRoute && !response.payload.isAdmin) {
              props.history.push("/sns/admin");
            } else {
              if (reload === false) {
                props.history.push("/sns/main");
              }
            }
          }
        });
      } else {  // SHOP PAGE

```

```
{/* SNS */}
 <Route exact path="/sns/main" component={Auth(Home, true, true)} />
```

ë¡œê·¸ì•„ì›ƒ í•˜ê¸° ë²„íŠ¼ ëˆ„ë¥´ê²Œ ë˜ë©´ /API/mysql/users/logoutìœ¼ë¡œ ë°ì´í„° ì „ì†¡
destroy ì‚¬ ìœ ì € ë¡œê·¸ì¸ ì •ë³´ ì‚­ì œ

```js
const express = require("express");
const router = express.Router();

router.get("/", (req, res) => {
  req.logout();
  req.session.destroy();
  res.send('ok');
});

module.exports = router;
```

## SNS Main

 
### í”„ë¡œí•„ ì •ë³´ ë³€ê²½
 
 
![KakaoTalk_Photo_2021-11-24-16-10-06](https://user-images.githubusercontent.com/88940298/143191842-e032063e-9b70-4eeb-8b9e-3138f84352d8.gif)

useSelectorë¥¼ ì‚¬ìš©í•˜ì—¬ reduxì˜ storeì— ì €ì¥ëœ userì •ë³´ë¥¼ ëŒê³ ì˜¨ í›„, useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ëŒê³  ì˜¨ ìœ ì € ì •ë³´ë¥¼ ë³€ê²½í•©ë‹ˆë‹¤.
```js
  //useSelectorë¥¼ ì‚¬ìš©í•˜ì—¬ ë¦¬ë•ìŠ¤ì˜ ìœ ì €ì •ë³´ë¥¼ í™œìš©
  const userInfo = useSelector((state) => state.user);

  //useState ë¥¼ ì‚¬ìš©í•˜ì—¬ ê°’ ë³€ê²½
  const [ChangeMyImage, setChangeMyImage] = useState("");
  const [ChangeCoupleCode, setChangeCoupleCode] = useState("");
  const [ChangeMessage, setChangeMessage] = useState("");
  const [ChangePhone, setChangePhone] = useState("");
  const [ChangeAddress, setChangeAddress] = useState("");

  const updateImages = (newImages) => {
    setChangeMyImage(newImages);
  };
  const onChangeCoupleCode = (event) => {
    setChangeCoupleCode(event.currentTarget.value);
  };
  const onChangeMessage = (event) => {
    setChangeMessage(event.currentTarget.value);
  };
  const onChangePhone = (event) => {
    setChangePhone(event.currentTarget.value);
  };
  const onChangeAddress = (event) => {
    setChangeAddress(event.currentTarget.value);
  };


  const onSubmitUserInfo = () => {
    const variables = {
      id: userInfo.userData.id,
      image: ChangeMyImage,
      couple_code: ChangeCoupleCode,
      message: ChangeMessage,
      phone: ChangePhone,
      address: ChangeAddress,
    };

    Axios.post("/api/mysql/conditions/update", variables).then((response) => {
      if (response.data.success) {
        alert("ì •ë³´ê°€ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
        props.history.push("/sns/Main");
      } else {
        alert("ì •ë³´ ë³€ê²½ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
      }
    });
  };

  let userImg;
  if (props.user.userData) {
    userImg = props.user.userData.image;
  }

  let postImage = {
    updateImages,
  };
```


### ëœë¤ì½”ë“œ 
Math.random() ì™€ fromCharCode() ë¥¼ ì´ìš©í•´
ëœë¤í•œ ìˆ«ìì— í•´ë‹¹í•˜ëŠ” ì•„ìŠ¤í‚¤ì½”ë“œë¥¼ ì°¾ì•„
ì•ŒíŒŒë²³ ì†Œë¬¸ì, ëŒ€ë¬¸ì, ìˆ«ìë¥¼ í•œìì”© forë¬¸ìœ¼ë¡œ ì§€ì •í•œ ê¸¸ì´ë§Œí¼ ë§Œë“¤ì–´ë‚¸ë‹¤


```js
const [CodeCode, setCodeCode] = useState("");
  const [Length, setLength] = useState("8");
  const [LowerCheck, setLowerCheck] = useState(true);
  const [UpperCheck, setUpperCheck] = useState(true);
  const [NumberCheck, setNumberCheck] = useState(true);
  const [SymbolCheck, setSymbolCheck] = useState(false);

  // ëœë¤ ì½”ë“œ ë§Œë“œëŠ” ì˜µì…˜ë³„ í•¨ìˆ˜ë¥¼ ë‹´ì•„ë‘ 
  const randomFunc = {
    lower: getRandomLower,
    upper: getRandomUpper,
    number: getRandomNumber,
    symbol: getRandomSymbol,
  };

  // crypto.getRandomValues() : í•¨ìˆ˜ëŠ” ì•”í˜¸í•™ì ìœ¼ë¡œ ê°•ë ¥í•œ ìˆ˜ì¤€ì˜ ì„ì˜ì˜(random) ê°’ì„ ìƒì„±.
  //                            ë§¤ê°œ ë³€ìˆ˜ë¡œ ì œê³µëœ ë°°ì—´ì€ ì„ì˜ì˜ ìˆ«ìë¡œ ì±„ì›€ (ì•”í˜¸í™”ì˜ ì˜ë¯¸ëŠ” ë¬´ì‘ìœ„)
  function secureMathRandom() {
    return (
      window.crypto.getRandomValues(new Uint32Array(1))[0] /
      (Math.pow(2, 32) - 1)
    );
  }
  // Math.random()  : 0ì—ì„œ 1 ì†Œìˆ˜ì  ëœë¤ ë°˜í™˜
  // Math.floor()   : ì†Œìˆ˜ì  ë²„ë¦¼
  // fromCharCode() : ë©”ì„œë“œëŠ” UTF-16 ì½”ë“œ ìœ ë‹›ì˜ ì‹œí€€ìŠ¤ë¡œë¶€í„° ë¬¸ìì—´ì„ ìƒì„±í•´ ë°˜í™˜
  // ì†Œë¬¸ì ëœë¤ìƒì„±
  function getRandomLower() {
    // í•´ì„ : ëœë¤ ì†Œìˆ˜ì ì„ ì•ŒíŒŒë²³(26ì)ë§Œí¼ ê³±í•˜ê³  97ì„ ë”í•œ ê°’ì„ ì†Œìˆ˜ì ì„ ë²„ë¦° ì •ìˆ˜ì—
    //        í•´ë‹¹í•˜ëŠ” ì•ŒíŒŒë²³ì„ ë°˜í™˜
    //        ì•„ìŠ¤í‚¤ì½”ë“œ 97~122ë²ˆ, ëŒ€ë¬¸ìëŠ” 65~90ë²ˆ, ìˆ«ìëŠ” 48~57ë²ˆì´ê¸° ë•Œë¬¸
    return String.fromCharCode(Math.floor(Math.random() * 26) + 97);
  }
  // ëŒ€ë¬¸ì ëœë¤ìƒì„±
  function getRandomUpper() {
    return String.fromCharCode(Math.floor(Math.random() * 26) + 65);
  }
  // ìˆ«ì ëœë¤ìƒì„±
  function getRandomNumber() {
    return String.fromCharCode(Math.floor(secureMathRandom() * 10) + 48);
  }
  // íŠ¹ìˆ˜ë¬¸ì ëœë¤ìƒì„±
  function getRandomSymbol() {
    const symbols = '~!@#$%^&*()_+{}":?><;.,';
    return symbols[Math.floor(Math.random() * symbols.length)];
  }

  // ì˜µì…˜ëŒ€ë¡œ ì½”ë“œ ë§Œë“¤ì–´ë‚¼ í•¨ìˆ˜
  function generateCode(length, lower, upper, number, symbol) {
    // ê²°ê³¼ë¬¼ì˜ ì´ˆê¸°ê°’ì€ ë¹ˆê°’ ""
    let generatedCode = "";
    // filter ê±°ì³ì„œ typesArr ì— ë°°ì—´ë¡œ ë‹´ê¸°
    const typesArr = [{ lower }, { upper }, { number }, { symbol }].filter(
      // filter ë¡œ ê° ì˜µì…˜(ê°ì²´)ë“¤ì˜ ë°°ì—´ ì¸ë±ìŠ¤0 ì—ì„œ false ê±°ë¥´ê¸°
      (item) => Object.values(item)[0]
    );

    // ì…ë ¥í•œ ì½”ë“œ ê¸¸ì´ë§Œí¼ forë¬¸ ëŒë¦¬ê¸°
    for (let i = 0; i < length; i++) {
      // ì˜µì…˜ ìˆ˜ ë§Œí¼ forEach ëŒë¦¬ê¸°
      typesArr.forEach((type) => {
        // forEach í•´ë‹¹íšŒì°¨ì˜ ì˜µì…˜ì„ funcNameì— ë‹´ìŒ
        const funcName = Object.keys(type)[0];
        // randomFunc í•¨ìˆ˜ì—ì„œ í•´ë‹¹íšŒì°¨ ì˜µì…˜ëª…ì— í•´ë‹¹í•˜ëŠ” í•¨ìˆ˜ ëŒë ¤ì„œ ë‚˜ì˜¨ ê°’ì„ ê²°ê³¼ì— ì¶”ê°€                          //
        generatedCode += randomFunc[funcName]();
      });
    }
    // ê²°ê³¼ë¬¼ ë°°ì—´ ì˜ë¼ì„œ ë°˜í™˜
    return generatedCode.slice(0, length);
  } ////////////////////////////////////////////////í•¨ìˆ˜ ë¶„ì„
  // ì…ë ¥í•œ ê¸¸ì´ë§Œí¼ ì†Œë¬¸ì, ëŒ€ë¬¸ì, ìˆ«ì, íŠ¹ìˆ˜ë¬¸ì ìˆœìœ¼ë¡œ ê²°ê³¼ë¥¼ ë±‰ì–´ë‚¸ë‹¤
  // ê·¸ëŸ¼ (trueì¸ ì˜µì…˜ ìˆ˜) * (ì…ë ¥í•œ ê¸¸ì´) ì˜ ê²°ê³¼ë¬¼ì´ ë‚˜ì˜¤ê³ 
  // ê²°ê³¼ë¬¼ì—ì„œ ì…ë ¥í–ˆë˜ ê¸¸ì´ë§Œí¼ë§Œ ì˜ë¼ë‚¸ë‹¤ ((ì˜µì…˜ìˆ˜*ê¸¸ì´)-ê¸¸ì´) ë§Œí¼ì˜ ì½”ë“œëŠ” ë²„ë¦¬ê²Œ ë¨

  function CodeCodeCreator() {
    if (Length < 8) {
      alert("ì½”ë“œê°€ ë„ˆë¬´ ì ì–´ìš” 8ì ì´ìƒìœ¼ë¡œ í•´ì£¼ì„¸ìš”");
    } else if (LowerCheck || UpperCheck || NumberCheck || SymbolCheck) {
      setCodeCode(
        generateCode(Length, LowerCheck, UpperCheck, NumberCheck, SymbolCheck)
      );
    } else {
      alert("ì„ íƒëœ ì˜µì…˜ì´ ì—†ì–´ìš”");
    }
  }
```

### ë°©ëª…ë¡
 ![KakaoTalk_20211125_120706686](https://user-images.githubusercontent.com/88940298/143373040-255ef82d-11b5-463e-a2fb-5f0acfeb7442.gif)
 
 
 sns í™ˆ í™”ë©´ì—ëŠ” ë°©ë¬¸ìê°€ ê¸€ì„ ë‚¨ê¸¸ ìˆ˜ ìˆëŠ” ë°©ëª…ë¡ ê¸°ëŠ¥ì„ ë‘ì–´ ì‹¸ì´ì›”ë“œì˜ ê°ì„±ì„ ë†’ì˜€ìŠµë‹ˆë‹¤. useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ë¯¸ë‹ˆë¯¸ë¥¼ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
 
 
```js
  const onSubmit = (event) => {
    // event.preventDefault();  // antd ìì²´ ì ìš©

    if (
      !ProfileContent
    ) {
      return alert("fill all the fields first!");
    }

    const variables = {
      content: ProfileContent,
    };

    console.log(variables);

    Axios.post("/api/mysql/profiles/write", variables)
      .then((response) => {
        console.log('props.userInfo ëŠ” : ', response);
        if (response.data.success) {
          alert("Product Successfully Uploaded");
          window.location.replace("/sns/main");
        } else {
          console.log(response.data)
          alert("Failed to upload Product");
        }
      });
  };
```

```js
<Form onSubmit={onSubmit}>
      <Container>
        <Wrap className="VisitMsgBox">
          <ShowMiniMe className="VisitMsgBox-ImageBox">
            <img src={mArr[minime]} alt={"ë¯¸ë‹ˆë¯¸"} />
            <SettingMinime onClick={() => setIsShow(!isShow)}>
              ë¯¸ë‹ˆë¯¸
            </SettingMinime>
            <DropdownMinime
              isShow={isShow}
              setIsShow={setIsShow}
              setMinime={setMinime}
              mArr={mArr}
            />
          </ShowMiniMe>
          <VisitMsg onChange={onProfileContent} value={ProfileContent} />
          <Button onClick={onSubmit}>ë‚¨ê¸°ê¸°</Button>
        </Wrap>
      </Container>
    </Form>
```

### ì»¤í”Œ ì½”ë“œ
ì»¤í”Œì¸ ê²½ìš° ì»¤í”Œì½”ë“œë¥¼ ì…ë ¥ë°›ì•„ì„œ, ê°™ì€ ì»¤í”Œì½”ë“œë¥¼ ê°€ì§„ ê²½ìš° ì»¤í”Œë¡œ ë§¤ì¹­í•˜ê³  sns ë©”ì¸ í™”ë©´ì— ì»¤í”Œì„ ìƒì§•í•˜ëŠ” ì´ë¯¸ì§€ì™€ ì»¤í”Œë“¤ì˜ ì´ë¦„ì„ ë„ì›Œì¤ë‹ˆë‹¤.
```js
  const getCouple = () => {
    Axios.post("/api/mysql/couples/read")
      .then((response) => {
        const arr = response.data.allUser;

        for (let i = 0; i < arr.length; i++) {
          if (arr[i].couple_code === CoupleCode) {
            if (arr[i].name !== userInfo.userData.name && userInfo.userData.couple_code !== "9999") {
              setCC1(userInfo.userData.name)
              setCC2(arr[i].name)
              break;
            }
          } else {
          }
        }
      });
  }

  const couplelove = () => {
    if (CoupleCode === "9999" && CoupleCode === "9999") {
      return <LinkTitle><p>ë¹›ì´ë‚˜ëŠ” ì†”ë¡œ</p></LinkTitle>
    } else if (CoupleCode !== "9999" && CoupleCode !== "9999") {
      return <div className="couple">
        <img src={img} />
        <p>{CC1}â™¥ï¸{CC2}</p>
      </div>
    }
  }
```



 ### SNSê¸€ 

![KakaoTalk_20211125_143734592](https://user-images.githubusercontent.com/88940298/143385698-181dc013-a133-451f-a803-83a7a4145fec.gif)


useStateë¥¼ ì´ìš©í•˜ì—¬ ê²Œì‹œê¸€ì„ DBì— ì €ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.


```js
  const [profilecontent, setPostTitle] = useState("");

  const onSubmit = (event) => {
    if (!profilecontent) {
      return alert("fill all the fields first!");
    }
    const variables = {
      content: profilecontent,
    };

    Axios.post("/api/mysql/posts/write", variables)
      .then((response) => {
        console.log('props.user ëŠ” : ', response);
        if (response.data.success) {
          alert("Post Successfully Uploaded");
          props.history.push("/sns");
        } else {
          console.log(response.data)
          alert("Failed to upload Post");
        }
      });
  };
```




 ### SNSê¸€ ì‚­ì œ
 
 ëª¨ë‹¬ ë‚´ë¶€ì—ì„œ  DELETEì‚¬ìš©  SERVERë¡œ ì •ë³´ë¥¼ ê°€ê²Œí•˜ì—¬ ì‚­ì œí• ìˆ˜ìˆê²Œ ê¸°ëŠ¥ ì¶”ê°€
 ![KakaoTalk_20211125_150810995](https://user-images.githubusercontent.com/88940298/143390883-4f0ef9ae-ddf2-43c6-a614-e5149427e8c3.gif)

```js
const Delete = (props) => {
  const [postData, setPostData] = useState([]);
  let index = (props.modal.index);

  useEffect(() => {
    setPostData(props.modal.modal);
  }, []);

  const onSubmit = (event) => {
    event.preventDefault();
    
    Axios.delete(`/api/mysql/posts/write/delete/${postData[index].id}`)
      .then(response => {
        if (response.data.success) {
          window.location.replace('./profile')
        } else {
          alert('ëŒ“ê¸€ì„ ì €ì¥í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.');
        }
      })
  }
  return (
      <form style={{ display:'flex' }} onSubmit={onSubmit}>
        <button style={{ width: '20%', height: '37px' }} onClick={onSubmit}  >ì‚­ì œ</button>
      </form>
  )
};
```

### ëª¨ë‹¬ì°½ êµ¬í˜„
- SNS Modal  
![KakaoTalk_20211125_111701228](https://user-images.githubusercontent.com/88940298/143374992-5bdcd998-cf3c-4dab-9598-8f2b96dbbddd.gif)

-  ì‚¬ì§„ì²© Modal-

![KakaoTalk_20211125_122815439](https://user-images.githubusercontent.com/88940298/143374909-e3bcc232-f911-4aa6-80ed-1c83671ed49f.gif)

onsubmit ì„ í†µí•´ í´ë¦­ì‹œ ëª¨ë‹¬ì°½ ë Œë”ë§
modal ì— propsë¥¼ ì „ë‹¬ í•˜ì—¬ ë°ì´í„° ë° ì´ë¯¸ì§€ ë Œë”ë§
```js
 onSubmit={onSubmit} onDoubleClick={() => {
        setIndex(index);
        setOpenModal(true);
```
``` js
<Modal
                index={Index}
                modal={PostArray}
                setOpenModal={setOpenModal}
                openModal={openModal}
              />
              
```
```
const Modal = (props) => {
  const { setOpenModal } = props;
  const data = props.modal
```

### MusicPlayer êµ¬í˜„
![KakaoTalk_Photo_2021-11-24-17-07-22](https://user-images.githubusercontent.com/88940298/143199061-103753d0-a7bd-4d85-b124-e53334e8a4cf.png)

disablekb ë¥¼ 1ë¡œ ì„¤ì •í•˜ì—¬ í”Œë ˆì´ì–´ê°€ í‚¤ë³´ë“œ ì»¨íŠ¸ë¡¤ì— ì‘ë‹µí•˜ì§€ ì•Šê²Œ í–ˆê³ ,
autoplay ë¥¼ 1ë¡œ ì„¤ì •í•˜ì—¬ ìë™ ì¬ìƒë˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤

```js
<iframe
          width="240"
          height="100"
          src="https://www.youtube.com/embed/_3A-jr1xC9o?loop=1&controls=1&autoplay=1&mute=0&disablekb=1&fs=0"
          title="YouTube video player"
          allow="accelerometer; autoplay; clipboard-write; encrypted-media; 
          gyroscope; picture-in-picture;"
        ></iframe>

```


### ì»¤í”Œ ì—¬í–‰ì§€ ì¹´í…Œì½”ë¦¬ êµ¬í˜„

![KakaoTalk_20211125_114457353](https://user-images.githubusercontent.com/88940298/143371036-745d1095-2d6a-4307-99f4-37f0d54275c9.gif)

ì„ íƒëœ ì¹´ë°ê³ ë¦¬ ê°’ì„ e.currentTarget.innerTextë¥¼ ì´ìš©í•˜ì—¬ backìœ¼ë¡œ ì „ë‹¬ í•©ë‹ˆë‹¤. backì—ì„œëŠ” ì¼ì¹˜í•˜ëŠ” ê°’ì„ ì°¾ì•„ì„œ frontë¡œ ë³´ë‚´ê³ , frontëŠ” ì „ë‹¬ ë°›ì€ dataë¥¼ mapí•¨ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ í™”ë©´ì— ì¶œë ¥í•˜ì˜€ìŠµë‹ˆë‹¤.

```js
export default () => {
    const [posts, setPosts] = useState([]);
    const [mood, setMood] = useState('');
    const moods = ['ì˜í™”', 'ê³µì—°', 'ì¶•ì œ', 'ì—¬í–‰', 'ë§›ì§‘', 'ê¸°íƒ€'];

    const onMoodChange = (e) => {

        setMood(e.currentTarget.innerText);
        setPosts([]);


        const variables = {
            mood: e.currentTarget.innerText,
        }

        //backìœ¼ë¡œ ì„ íƒëœ ì¹´ë°ê³ ë¦¬ ê°’ì„ ì „ë‹¬í•©ë‹ˆë‹¤.
        Axios.post("/api/mysql/jams/read/mood", variables)
            .then((response) => {
                if (response.data.success) {
                    setPosts(response.data.jams);

                } else {
                    alert("ì½ì–´ë“œë¦¬ëŠ” ë° ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.");
                }
            });
    };


    return (
        <MarginContainer>
            <HeaderContainer>
                <Title>ğŸªğŸ‰ğŸ</Title>
                <MoodList>
                    {moods.map((moodText) => (
                        <Mood
                            key={moodText}
                            onClick={onMoodChange}
                            // ì„ íƒëœ ì¹´í…Œê³ ë¦¬ê°€ í™œì„±í™” ë©ë‹ˆë‹¤.
                            active={moodText === mood ? true : false}
                        >
                            {moodText}
                        </Mood>
                    ))}
                </MoodList>
            </HeaderContainer>
            <Container>
                {posts.map((post) => (
                    <Picture
                        //ì»´í¬ë„ŒíŠ¸ë¡œ propsë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
                        id={post.id}
                        key={post.id}
                        imageUrl={post.images[0]}
                        mood={post.mood}
                        review={post.review}
                        title={post.title}
                    />
                ))}
            </Container>
        </MarginContainer>
    );
};

```
```js
router.post('/mood', async (req, res, next) => {
  try {
    let keyWord = req.body.mood

    const fulljam = await Jam.findAll({
      include: {
        model: User,
        attribute: ["id", "name"],
      },
      where: {
        mood: keyWord,
      },
      order: [['id', 'DESC']],
    });
```



### ì—°ì¸ì—ê²Œ ì»¤í”Œí¸ì§€ ë‚¨ê¸°ê¸° êµ¬í˜„
![KakaoTalk_20211125_123246471](https://user-images.githubusercontent.com/88940298/143375358-e937181e-7314-4c1e-98b1-b5e3604bcf93.gif)


![KakaoTalk_20211125_115238778](https://user-images.githubusercontent.com/88940298/143371849-fc4a8f48-f329-44b3-8f57-0b6e2317043d.gif)

useSelectorì™€ useStateë¥¼ ì‚¬ìš©í•˜ì—¬ ì—°ì¸ì—ê²Œ í¸ì§€ë¥¼ ë³´ë‚¼ ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

```js
const LetterWrite = (props) => {
  const userInfo = useSelector(state => state.user);

  const [LetterTo, setLetterTo] = useState("");
  const [LetterTitle, setLetterTitle] = useState("");
  const [LetterContent, setLetterContent] = useState("");
  const [LetterFrom, setLetterFrom] = useState("");
  const [LetterPs, setLetterPs] = useState("");
  const [Code, setCode] = useState("");
  const [Name, setName] = useState("");

  useEffect(() => {
    if (userInfo) {
      if (userInfo.userData) {
        if (userInfo.userData.couple_code) {
          setCode(userInfo.userData.couple_code);
        }
        if (userInfo.userData.name) {
          setName(userInfo.userData.name);
        }
      }
    }
  }, [userInfo])
  
  const onLetterTo= (event) => {
    setLetterTo(event.currentTarget.value);
  
  };
  const onLetterTitle= (event) => {
    setLetterTitle(event.currentTarget.value);
  
  };
  const onLetterContent= (event) => {
    setLetterContent(event.currentTarget.value);
  
  };
  const onLetterFrom= (event) => {
    setLetterFrom(event.currentTarget.value);
  
  };
  const onLetterPs= (event) => {
    setLetterPs(event.currentTarget.value);
  
  };
  
  const user = useSelector(state => state.user);
  const onSubmit = (event) => {

    if (
      !LetterTo ||
      !LetterTitle ||
      !LetterContent ||
      !LetterFrom ||
      !LetterPs
      
    ) {
      return alert("fill all the fields first!");
    }

    const variables = {
      to: LetterTo,
      title:LetterTitle,
      content:LetterContent,
      from:LetterFrom,
      ps:LetterPs,
    };

    Axios.post("/api/mysql/letters/write", variables)
      .then((response) => {
        console.log('props.user ëŠ” : ', response);
        if (response.data.success) {
   
          alert("Letter Successfully Uploaded");
          props.history.push("/sns/Latter");
        } else {
          console.log(response.data)
          alert("Failed to upload Letter");
        }
      });
  };

  if (Code !== null && Code !== undefined) {
    return   <div id="wrap"> 
      <div id='form_wrap'>
        <Form onSubmit={onSubmit}>
          {/* DropZone */}
      
          <label>to</label>
          <Input onChange={onLetterTo} value={LetterTo}  />
        
          <label>ì œëª©</label>
          <Input onChange={onLetterTitle} value={LetterTitle} />
        
          <label>ë‚´ìš©</label>
          <Input onChange={onLetterContent} value={LetterContent} />
        
          <label>From</label>
          <Input onChange={onLetterFrom} value={LetterFrom} />
        
          <label>ì¶”ì‹ </label>
          <Input onChange={onLetterPs} value={LetterPs} />
          <br />

          <Button onClick={onSubmit}>í¸ì§€ë³´ë‚´ê¸°</Button>
        </Form>
      </div>
    </div>
  } else {
    return <div><p>í¸ì§€ë¥¼ ëª»ì¨ìš”</p></div>
  }
};
```









## SHOP Main

 ### ë¬¼í’ˆë“±ë¡
 ![KakaoTalk_20211125_143342490](https://user-images.githubusercontent.com/88940298/143385790-686b59a4-33ec-4ef0-807d-808743f4c24d.gif)



ë¬¼í’ˆë“±ë¡ í˜ì´ì§€ì—ì„œ ê¸°ì…í•œ ë‚´ìš©ê³¼ ì‚¬ì§„,ì˜ìƒì— ëŒ€í•œ ì •ë³´ê°€ DBì— ë“¤ì–´ê°„ë‹¤


```js

ë¬¼í’ˆë“±ë¡

    Axios.post("/api/mongo/product/uploadProduct", variables).then(
      (response) => {
        if (response.data.success) {
          alert("ì•„ì´í…œì´ ê±°ë˜ì†Œì— ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.");
          props.history.push("/shop/main");
        } else {
          alert("ì•„ì´í…œ ë“±ë¡ì´ ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤");
        }
      }
    );



router.post("/", (req, res) => {
  console.log(req.body);
  const product = new Product(req.body);

  product.save((err, doc) => {
      if (err) return res.json({ success: false, err });
      return res.status(200).json({ success: true });
  });
});
```



 
  ###  ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜
  ![KakaoTalk_20211125_144533948](https://user-images.githubusercontent.com/88940298/143392173-e7d607e1-29a8-4ee1-ac15-017620719354.gif)
```js
  const [Checked, setChecked] = useState([]);

  const handleToggle = (value) => {
    const currentIndex = Checked.indexOf(value);

    const newChecked = [...Checked];
    if (currentIndex === -1) {
      newChecked.push(value);
    } else {
      newChecked.splice(currentIndex, 1);
    }

    setChecked(newChecked);
    props.handleFilters(newChecked);
  };

  const renderCheckboxLists = () =>
    props.list &&
    props.list.map((value, index) => {
      return (
        <React.Fragment key={index}>
          <div>
            <Checkbox
              onChange={() => handleToggle(value._id)}
              checked={Checked.indexOf(value._id) === -1 ? false : true}
            />
            <span>{value.name}</span>
          </div>
        </React.Fragment>
      );
    });

```
```js
const itemNumber = [
  {
    _id: 1,
    name: "ì˜ë¥˜",
  },
  {
    _id: 2,
    name: "ì‹ ë°œ",
  },
// .......ì¤‘ëµ
  {
    _id: 12,
    name: "ê¸°íƒ€",
  },
];

export { itemNumber };



ì¹´í…Œê³ ë¦¬ ë¶„ë¥˜ ì¶”ê°€
```
ì²´í¬ë°•ìŠ¤ì™€ ë¼ë””ì˜¤ë°•ìŠ¤ë¥¼ ì„ íƒí•˜ë©´
ë¬¼í’ˆëª©ë¡ê³¼ ê°€ê²©ëŒ€ëª©ë¡ì˜ _id ê°’ì„ ì°¾ì•„ì„œ
í•´ë‹¹ë˜ëŠ” ë¬¼í’ˆë“¤ ìƒˆë¡œ ì¶œë ¥  

### ì¥ë°”êµ¬ë‹ˆ ê²°ì œ
![KakaoTalk_20211125_150642966](https://user-images.githubusercontent.com/88940298/143392134-38560967-d8a4-4abb-a1a1-6ddf5d614cf2.gif)
```js
  const addToCarthandler = () => {
    props.addToCart(props.detail._id);
  };


  const dispatch = useDispatch();
  const addToCartHandler = (pd_id) => {
    dispatch(addToCart(pd_id));
    alert("ì¥ë°”êµ¬ë‹ˆì— ë‹´ê²¼ìŠµë‹ˆë‹¤.");
  };

export function addToCart(_id) {
  const request = axios
    .get(`${MONGO_USER_SERVER}/addToCart?productId=${_id}`)
    .then((response) => response.data);

  return {
    type: ADD_TO_CART_USER,
    payload: request,
  };
}



ì¥ë°”êµ¬ë‹ˆì— ë‹´ìœ¼ë©´ ë¬¼í’ˆì •ë³´ë¥¼ ë””ìŠ¤íŒ¨ì¹˜ ì•¡ì…˜ì„ í†µí•´ User DBì— ì €ì¥í•œë‹¤
```
```js
export function getHistory(data) {
  let request = axios
      .get(`${MONGO_USER_SERVER}/payment/getHistory`, data)
      .then((response) => response.data);

  return {
    type: AUTH_USER,
    payload: request,
  };
}

```
ê²°ì œë˜ë©´ ë¬¼í’ˆì— ëŒ€í•œ êµ¬ë§¤ì´ë ¥ DBì— ì €ì¥


### ëŒ“ê¸€,ëŒ€ëŒ“ê¸€
 

![KakaoTalk_20211125_145627253](https://user-images.githubusercontent.com/88940298/143392026-8e22da2c-beb3-4233-9249-0a9984b27942.gif)  
ëŒ“ê¸€ì„ ì‘ì„±í•˜ë©´ ì‘ì„±ì, ê²Œì‹œê¸€, ëŒ“ê¸€ë‚´ìš©ì´ DBì— ì €ì¥ì´ë˜ê³  ë‹µê¸€ì„ ë‹¬ë©´ ëŒ“ê¸€ì •ë³´ë„ ì¶”ê°€ë¡œ DBì— ì €ì¥ëœë‹¤.  

ëŒ“ê¸€ì€ Comment.js ì—ì„œ State ì— ì €ì¥ë˜ê³  refreshFunction ë¡œ ì§€ì •ëœ props ë¡œ ìµœìƒìœ„ ë¶€ëª¨ì¸ DetailProductPage.js ì— Comment State ì— ì €ì¥ëœë‹¤.   

ë˜í•œ Comment.js ì—ì„œëŠ” SingleComment.js ì˜ props ë¥¼ ì´ìš©í•´ì„œ ì²«ë²ˆì§¸ ëŒ“ê¸€ì´ ì •í•´ì§€ë©°, ReplyComment.js ì˜ props ë¥¼ ì´ìš©í•´ì„œ ì²«ëŒ“ê¸€ì˜ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜¨ë‹¤.  
ìœ„ì˜ ê³¼ì •ì„ ë°˜ë³µí•˜ì—¬ ë¬´í•œí•œ ëŒ€ëŒ“ê¸€ì„ ë‹¬ ìˆ˜ ìˆë‹¤.  

```js
  const user = useSelector((state) => state.user);
  const [Comment, setComment] = useState("");
  const [Writer, setWriter] = useState("");

  const handleChange = (event) => {
    setComment(event.currentTarget.value);
  };

  useEffect(() => {
    const userData = { userInfo : user.userData };
    if (user.userData) {
      if (user.userData.gender) {
        axios.get('/api/mongo/users/sns/getMongo', userData)
          .then(response => {
            if (response.data.success) {
              console.log(response);
              setWriter(response.data.user[0]._id);
            } else {
              alert('Failed')
            }
        })
      } else {
        if (user.userData) {
          setWriter(user.userData._id);
        }
      }
    } 
  }, [user.userData])

  const onSubmit = (event) => {
    event.preventDefault();
   
    const variables = {
      content: Comment,
      writer: Writer,
      postId: props.postId,
    };

    axios.post("/api/mongo/product/saveComment", variables).then((response) => {
      if (response.data.success) {
        setComment("");
        props.refreshFunction(response.data.result);
      } else {
        alert("Failed to save Comment");
      }
    });
  };

  return (
    <div className="postPage-comment">
      <p className="comment-text">ëŒ“ê¸€</p>
      <hr />
      {props.commentLists &&
        props.commentLists.map(
          (comment, index) =>
            !comment.responseTo && (
              <React.Fragment>
                <SingleComment
                  comment={comment}
                  postId={props.postId}
                  refreshFunction={props.refreshFunction}
                />
                <ReplyComment
                  CommentLists={props.commentLists}
                  postId={props.postId}
                  parentCommentId={comment._id}
                  refreshFunction={props.refreshFunction}
                />
              </React.Fragment>
            )
        )}
```
```js
    const user = useSelector(state => state.user);
    const [CommentValue, setCommentValue] = useState("")
    const [Writer, setWriter] = useState("");
// ìƒëµ
    const onSubmit = (event) => {
      event.preventDefault();

      const variables = {
        writer: Writer,
        postId: props.postId,
        responseTo: props.comment._id,
        content: CommentValue
      }

      Axios.post('/api/mongo/product/saveComment', variables)
        .then(response => {
            if (response.data.success) {
                setCommentValue("")
                setOpenReply(!OpenReply)
                props.refreshFunction(response.data.result)
            } else {
                alert('Failed to save Comment')
            }
        })
    }

    const actions = [
        <span onClick={openReply} key="comment-basic-reply-to">ë‹µê¸€ ë‹¬ê¸°</span>
    ]
    
    if (props.comment) {
      return (
          <div>
              <Comment
                  actions={actions}
                  author={props.comment.writer.name}
                  avatar={
                      <Avatar
                          src={props.comment.writer.image}
                          alt="image"
                      />
                  }
                  content={
                      <p>
                          {props.comment.content}
                      </p>
                  }
              />
```
```js
    const [ChildCommentNumber, setChildCommentNumber] = useState(0)
    const [OpenReplyComments, setOpenReplyComments] = useState(false)

    useEffect(() => {
        let commentNumber = 0;
        props.CommentLists.map((comment) => {
            if (comment.responseTo === props.parentCommentId) {
                commentNumber++
            }
        })
        setChildCommentNumber(commentNumber)
    }, [props.CommentLists, props.parentCommentId])


    let renderReplyComment = (parentCommentId) =>
        props.CommentLists.map((comment, index) => (
            <React.Fragment>
                {comment.responseTo === parentCommentId &&
                    <div style={{ width: '80%', marginLeft: '40px' }}>
                        <SingleComment comment={comment} postId={props.postId} refreshFunction={props.refreshFunction} />
                        <ReplyComment CommentLists={props.CommentLists} parentCommentId={comment._id} postId={props.postId} refreshFunction={props.refreshFunction} />
                    </div>
                }
            </React.Fragment>
        ))
```
### ë¦¬ë•ìŠ¤
![ë¦¬ë•ìŠ¤ í”Œë¡œìš° ì „ì²´ë„](https://user-images.githubusercontent.com/90792916/143544265-c31437e7-4c40-4c8f-bf2a-61e803142ff7.png)
Reactë‘ React+Reduxì˜ ê²°ì •ì  ì°¨ì´
 ReactëŠ” React ì»´í¬ë„ŒíŠ¸ ìì‹ ì´ ê°œë³„ì ìœ¼ë¡œ ìƒíƒœê´€ë¦¬ë¥¼ í•œë‹¤.
 React+ReduxëŠ” ìƒíƒœê´€ë¦¬ë¥¼ í•˜ëŠ” ì „ìš© ì¥ì†Œ(store)ì—ì„œ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê³ , React ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ê±¸ ë³´ì—¬ì£¼ê¸°ë§Œ í•˜ëŠ” ìš©ë„ë¡œ ì“°ì¸ë‹¤.

Store
 ìƒíƒœëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ì „ë¶€ ì—¬ê¸°ì„œ ì§‘ì¤‘ê´€ë¦¬ ë©ë‹ˆë‹¤. ì»¤ë‹¤ë€ JSONì˜ ê²°ì •ì²´ì •ë„ì˜ ì´ë¯¸ì§€ì…ë‹ˆë‹¤.

Action ë° Action Creator
 Store ë° Storeì— ì¡´ì¬í•˜ëŠ” StateëŠ” ì•„ì£¼ ì‹ ì„±í•œ ê²ƒì´ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. React ì»´í¬ë„ŒíŠ¸ê°™ì€ í•˜ë“±í•œ ê²ƒì´ ì§ì ‘ ì ‘ê·¼í•˜ë ¤ê³  í•˜ë©´ ì•ˆ ë˜ëŠ” ê²ƒì´ì£ . ì§ì ‘ ì ‘ê·¼í•˜ê¸° ìœ„í•´ Actionì´ë¼ëŠ” ì˜ì‹ì„ ê±°ì³ì•¼ í•©ë‹ˆë‹¤. ì´ë²¤íŠ¸ ë“œë¦¬ë¸ê³¼ ê°™ì€ ê°œë…ì…ë‹ˆë‹¤.

Reducer
 ì•ì— â€˜Storeì˜ ë¬¸ì§€ê¸°â€™ë¼ê³  ì“´ ì ì´ ìˆìŠµë‹ˆë‹¤ë§Œ, ê·¸ ê°œë…ê³¼ ë¹„ìŠ·í•œ ì—­í• ì„ í•˜ëŠ” ê²ƒì´ Reducerì…ë‹ˆë‹¤.
 í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ì—ì„œ Reducerë¼ëŠ” ìš©ì–´ëŠ” í•©ì„±ê³±ì„ ì˜ë¯¸í•©ë‹ˆë‹¤ë§Œ, Reduxì— í•œí•´ì„œëŠ” ì•„ë˜ì™€ ê°™ì´ ì´ì „ ìƒíƒœì™€ Actionì„ í•©ì³, ìƒˆë¡œìš´ stateë¥¼ ë§Œë“œëŠ” ì¡°ì‘ì„ ë§í•©ë‹ˆë‹¤.

### DBêµ¬ì¡° 
![KakaoTalk_20211125_114838306](https://user-images.githubusercontent.com/88940298/143371203-28d2aa41-7894-442c-a505-594b6f10506c.png)


ê° ê´€ê³„ì— ë§ê²Œ ê´€ê³„ì¿¼ë¦¬ ìƒì„± 
imageì˜ ê²½ìš° sns ë° ì‚¬ì§„ì²© ì—ì„œ ë™ì‹œì— ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— ê´€ê³„ë¥¼ ì—®ì–´ ì‚¬ìš©



### í”„ë¡œì íŠ¸ ê¸°íšì•ˆ PPT
[êµ¬ê¸€ í”„ë ˆì  í…Œì´ì…˜ íŒŒì¼](https://docs.google.com/presentation/d/13yVkx7W7bpqiPpieAJCAUgyme5Hsj_4gum353ISTyi4/edit#slide=id.p)   
[êµ¬ê¸€ í”„ë¦¬ì  í…Œì´ì…˜ íŒŒì¼ ê¸°íšì•ˆ 2](https://drive.google.com/file/d/17_Bz_mce2lQwyWdOZ9gFvuxifBwlwVXD/view?usp=sharing)



